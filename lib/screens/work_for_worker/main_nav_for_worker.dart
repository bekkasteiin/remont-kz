import 'package:bottom_nav_layout/bottom_nav_layout.dart';import 'package:dependencies/dependencies.dart';import 'package:flutter/material.dart';import 'package:remont_kz/domain/services/rest_services.dart';import 'package:remont_kz/main.dart';import 'package:remont_kz/screens/category/category_screen.dart';import 'package:remont_kz/screens/chat/chat_screens.dart';import 'package:remont_kz/screens/create/create_screen.dart';import 'package:remont_kz/screens/work_for_worker/main_screen_worker/main_worker_view_screen.dart';import 'package:remont_kz/screens/work_for_worker/profile_worker/profile_worker_screen.dart';import 'package:remont_kz/utils/app_colors.dart';class MainNavbarForWorker extends StatefulWidget {  const MainNavbarForWorker({Key? key}) : super(key: key);  @override  State<MainNavbarForWorker> createState() => _MainNavbarForWorkerState();}class _MainNavbarForWorkerState extends State<MainNavbarForWorker> {  @override  void initState() {    if(tokenStore.accessToken!=null){      WidgetsBinding.instance.addPostFrameCallback((_) async {        try {          final newMessages = await RestServices().isHaveNewMessage();          print(newMessages);          if(newMessages!=null){            if (mounted) {              setState(() {                newMessage = newMessages;              });            }          }        } catch (e) {          print("Error fetching publication: $e");        }});    }    super.initState();  }  @override  Widget build(BuildContext context) {    return BottomNavLayout(      pages: [        (_) => const MainWorkerScreen(),        (_) =>  CategoriesScreen(showLeading: false,),        (_) => const CreateOrderScreen(),        (_) =>  ChatScreens(),        (_) => const ProfileWorkerScreen(),      ],      bottomNavigationBar: (currentIndex, onTap) => Container(          decoration: BoxDecoration(            boxShadow: <BoxShadow>[              BoxShadow(                color: Colors.black,                blurRadius: 0.5.h,              ),            ],          ),          child: Theme(          data: Theme.of(context).copyWith(            splashColor: Colors.transparent,            highlightColor: Colors.transparent,          ),          child: BottomNavigationBar(        type: BottomNavigationBarType.fixed,        currentIndex: currentIndex,        onTap: (index) => onTap(index),        items:  [          BottomNavigationBarItem(            icon: ImageIcon(AssetImage('assets/images/main.png'),  ),            label: 'Главная',          ),          BottomNavigationBarItem(            icon: ImageIcon(AssetImage('assets/images/category.png'), ),            label: 'Категории',          ),          BottomNavigationBarItem(            icon: ImageIcon(              AssetImage('assets/images/create.png'),            ),            label: 'Создать',          ),          BottomNavigationBarItem(            icon:  newMessage!= null ?                newMessage == true            ?            Stack(              children: [                Container(                  padding: EdgeInsets.all(4.w),                  child: SvgPicture.asset(                    'assets/icons/chat_menu.svg',                    fit: BoxFit.fill,                  ),                ),                Positioned(                   right: -2,                    top: 0,                    child: Icon(Icons.notifications_active_outlined, color: AppColors.red,                    size: 12.w,))              ],            ) : SvgPicture.asset(                  'assets/icons/chat_menu.svg',                  fit: BoxFit.fill,                ) :  SvgPicture.asset(              'assets/icons/chat_menu.svg',              fit: BoxFit.fill,            ),            activeIcon: SvgPicture.asset(              'assets/icons/chat_menu.svg',              fit: BoxFit.fill,              color: AppColors.primary,            ),            label: 'Сообщения',          ),          BottomNavigationBarItem(            icon: ImageIcon(AssetImage('assets/images/profile.png'),),            label: 'Профиль',          ),        ],        selectedItemColor: AppColors.primary,        unselectedItemColor: AppColors.primaryGray,        backgroundColor: AppColors.white,        selectedFontSize: 10,        unselectedFontSize: 10,      ),),),    );  }}